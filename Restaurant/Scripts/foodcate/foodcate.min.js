var homeconfig={pageSize:2,pageIndex:1},homeController={init:function(){homeController.loadData();homeController.registerEvent()},registerEvent:function(){$("#txtSearch").off("keypress").on("keypress",function(n){n.which==13&&homeController.loadData(!0)});$("#btnSearch").off().on("click",function(){homeController.loadData(!0)})},loadData:function(n){var t=$("#txtSearch").val();$.ajax({url:"/Home/GetFood",type:"GET",dataType:"json",data:{searchname:t,page:homeconfig.pageIndex,pageSize:homeconfig.pageSize},success:function(t){if(t.status){var r=t.data,i="",u=$("#data-template").html();$.each(r,function(n,t){i+=Mustache.render(u,{FoodID:t.FoodID,FoodName:t.FoodName,Price:t.Price,PriceDiscount:t.PriceDiscount,Image:t.Image})});$("#tblData").html(i);homeController.paging(t.total,function(){homeController.loadData()},n);homeController.registerEvent()}else alert("Load failed.")}})},paging:function(n,t,i){var r=Math.ceil(n/homeconfig.pageSize);($("#pagination a").length===0||i===!0)&&($("#pagination").empty(),$("#pagination").removeData("twbs-pagination"),$("#pagination").unbind("page"));$("#pagination").twbsPagination({totalPages:r,first:"<<",next:">",last:">>",prev:"<",initiateStartPageClick:!1,visiblePages:5,onPageClick:function(n,i){homeconfig.pageIndex=i;setTimeout(t,200)}})}};homeController.init(),function(n,t){typeof exports=="object"&&exports&&typeof exports.nodeName!="string"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):(n.Mustache={},t(n.Mustache))}(this,function(n){function f(n){return typeof n=="function"}function l(n){return u(n)?"array":typeof n}function o(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s(n,t){return n!=null&&typeof n=="object"&&t in n}function v(n,t){return a.call(n,t)}function p(n){return!v(y,n)}function b(n){return String(n).replace(/[&<>"'`=\/]/g,function(n){return w[n]})}function tt(t,i){function lt(){if(ft&&!w)while(y.length)delete a[y.pop()];else y=[];ft=!1;w=!1}function ht(n){if(typeof n=="string"&&(n=n.split(d,2)),!u(n)||n.length!==2)throw new Error("Invalid tags: "+n);et=new RegExp(o(n[0])+"\\s*");v=new RegExp("\\s*"+o(n[1]));st=new RegExp("\\s*"+o("}"+n[1]))}var et,v,st,f,c,e,s,b,ot,l,tt,ct;if(!t)return[];var ut=[],a=[],y=[],ft=!1,w=!1;for(ht(i||n.tags),f=new r(t);!f.eos();){if(c=f.pos,s=f.scanUntil(et),s)for(tt=0,ct=s.length;tt<ct;++tt)b=s.charAt(tt),p(b)?y.push(a.length):w=!0,a.push(["text",b,c,c+1]),c+=1,b==="\n"&&lt();if(!f.scan(et))break;if(ft=!0,e=f.scan(nt)||"name",f.scan(k),e==="="?(s=f.scanUntil(h),f.scan(h),f.scanUntil(v)):e==="{"?(s=f.scanUntil(st),f.scan(g),f.scanUntil(v),e="&"):s=f.scanUntil(v),!f.scan(v))throw new Error("Unclosed tag at "+f.pos);if(ot=[e,s,c,f.pos],a.push(ot),e==="#"||e==="^")ut.push(ot);else if(e==="/"){if(l=ut.pop(),!l)throw new Error('Unopened section "'+s+'" at '+c);if(l[1]!==s)throw new Error('Unclosed section "'+l[1]+'" at '+c);}else e==="name"||e==="{"||e==="&"?w=!0:e==="="&&ht(s)}if(l=ut.pop(),l)throw new Error('Unclosed section "'+l[1]+'" at '+f.pos);return rt(it(a))}function it(n){for(var u=[],t,i,r=0,f=n.length;r<f;++r)t=n[r],t&&(t[0]==="text"&&i&&i[0]==="text"?(i[1]+=t[1],i[3]=t[3]):(u.push(t),i=t));return u}function rt(n){for(var u=[],r=u,i=[],t,e,f=0,o=n.length;f<o;++f){t=n[f];switch(t[0]){case"#":case"^":r.push(t);i.push(t);r=t[4]=[];break;case"/":e=i.pop();e[5]=t[2];r=i.length>0?i[i.length-1][4]:u;break;default:r.push(t)}}return u}function r(n){this.string=n;this.tail=n;this.pos=0}function i(n,t){this.view=n;this.cache={".":this.view};this.parent=t}function t(){this.cache={}}var c=Object.prototype.toString,u=Array.isArray||function(n){return c.call(n)==="[object Array]"},a=RegExp.prototype.test,y=/\S/,w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},k=/\s*/,d=/\s+/,h=/\s*=/,g=/\s*\}/,nt=/#|\^|\/|>|\{|&|=|!/,e;return r.prototype.eos=function(){return this.tail===""},r.prototype.scan=function(n){var i=this.tail.match(n),t;return!i||i.index!==0?"":(t=i[0],this.tail=this.tail.substring(t.length),this.pos+=t.length,t)},r.prototype.scanUntil=function(n){var i=this.tail.search(n),t;switch(i){case-1:t=this.tail;this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i);this.tail=this.tail.substring(i)}return this.pos+=t.length,t},i.prototype.push=function(n){return new i(n,this)},i.prototype.lookup=function(n){var o=this.cache,t,i,r,u,e;if(o.hasOwnProperty(n))t=o[n];else{for(i=this,e=!1;i;){if(n.indexOf(".")>0)for(t=i.view,r=n.split("."),u=0;t!=null&&u<r.length;)u===r.length-1&&(e=s(t,r[u])),t=t[r[u++]];else t=i.view[n],e=s(i.view,n);if(e)break;i=i.parent}o[n]=t}return f(t)&&(t=t.call(this.view)),t},t.prototype.clearCache=function(){this.cache={}},t.prototype.parse=function(n,t){var r=this.cache,i=r[n];return i==null&&(i=r[n]=tt(n,t)),i},t.prototype.render=function(n,t,r){var u=this.parse(n),f=t instanceof i?t:new i(t);return this.renderTokens(u,f,r,n)},t.prototype.renderTokens=function(n,t,i,r){for(var s="",f,e,u,o=0,h=n.length;o<h;++o)u=undefined,f=n[o],e=f[0],e==="#"?u=this.renderSection(f,t,i,r):e==="^"?u=this.renderInverted(f,t,i,r):e===">"?u=this.renderPartial(f,t,i,r):e==="&"?u=this.unescapedValue(f,t):e==="name"?u=this.escapedValue(f,t):e==="text"&&(u=this.rawValue(f)),u!==undefined&&(s+=u);return s},t.prototype.renderSection=function(n,t,i,r){function l(n){return c.render(n,t,i)}var c=this,o="",e=t.lookup(n[1]),s,h;if(e){if(u(e))for(s=0,h=e.length;s<h;++s)o+=this.renderTokens(n[4],t.push(e[s]),i,r);else if(typeof e=="object"||typeof e=="string"||typeof e=="number")o+=this.renderTokens(n[4],t.push(e),i,r);else if(f(e)){if(typeof r!="string")throw new Error("Cannot use higher-order sections without the original template");e=e.call(t.view,r.slice(n[3],n[5]),l);e!=null&&(o+=e)}else o+=this.renderTokens(n[4],t,i,r);return o}},t.prototype.renderInverted=function(n,t,i,r){var f=t.lookup(n[1]);if(!f||u(f)&&f.length===0)return this.renderTokens(n[4],t,i,r)},t.prototype.renderPartial=function(n,t,i){if(i){var r=f(i)?i(n[1]):i[n[1]];if(r!=null)return this.renderTokens(this.parse(r),t,i,r)}},t.prototype.unescapedValue=function(n,t){var i=t.lookup(n[1]);if(i!=null)return i},t.prototype.escapedValue=function(t,i){var r=i.lookup(t[1]);if(r!=null)return n.escape(r)},t.prototype.rawValue=function(n){return n[1]},n.name="mustache.js",n.version="2.3.0",n.tags=["{{","}}"],e=new t,n.clearCache=function(){return e.clearCache()},n.parse=function(n,t){return e.parse(n,t)},n.render=function(n,t,i){if(typeof n!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+l(n)+'" was given as the first argument for mustache#render(template, view, partials)');return e.render(n,t,i)},n.to_html=function(t,i,r,u){var e=n.render(t,i,r);if(f(u))u(e);else return e},n.escape=b,n.Scanner=r,n.Context=i,n.Writer=t,n});!function(n,t){"use strict";var r=n.fn.twbsPagination,i=function(t,i){if(this.$element=n(t),this.options=n.extend({},n.fn.twbsPagination.defaults,i),this.options.startPage<1||this.options.startPage>this.options.totalPages)throw new Error("Start page option is incorrect");if(this.options.totalPages=parseInt(this.options.totalPages),isNaN(this.options.totalPages))throw new Error("Total pages option is not correct!");if(this.options.visiblePages=parseInt(this.options.visiblePages),isNaN(this.options.visiblePages))throw new Error("Visible pages option is not correct!");if(this.options.beforePageClick instanceof Function&&this.$element.first().on("beforePage",this.options.beforePageClick),this.options.onPageClick instanceof Function&&this.$element.first().on("page",this.options.onPageClick),this.options.hideOnlyOnePage&&1==this.options.totalPages)return this.options.initiateStartPageClick&&this.$element.trigger("page",1),this;if(this.options.href&&(this.options.startPage=this.getPageFromQueryString(),this.options.startPage||(this.options.startPage=1)),"UL"===("function"==typeof this.$element.prop?this.$element.prop("tagName"):this.$element.attr("tagName")))this.$listContainer=this.$element;else{var u=this.$element,r=n([]);u.each(function(){var t=n("<ul><\/ul>");n(this).append(t);r.push(t[0])});this.$listContainer=r;this.$element=r}return this.$listContainer.addClass(this.options.paginationClass),this.options.initiateStartPageClick?this.show(this.options.startPage):(this.currentPage=this.options.startPage,this.render(this.getPages(this.options.startPage)),this.setupEvents()),this};i.prototype={constructor:i,destroy:function(){return this.$element.empty(),this.$element.removeData("twbs-pagination"),this.$element.off("page"),this},show:function(n){if(n<1||n>this.options.totalPages)throw new Error("Page is incorrect.");this.currentPage=n;this.$element.trigger("beforePage",n);var t=this.getPages(n);return this.render(t),this.setupEvents(),this.$element.trigger("page",n),t},enable:function(){this.show(this.currentPage)},disable:function(){var t=this;this.$listContainer.off("click").on("click","li",function(n){n.preventDefault()});this.$listContainer.children().each(function(){n(this).hasClass(t.options.activeClass)||n(this).addClass(t.options.disabledClass)})},buildListItems:function(n){var t=[],r,i,u;for((this.options.first&&t.push(this.buildItem("first",1)),this.options.prev)&&(r=1<n.currentPage?n.currentPage-1:this.options.loop?this.options.totalPages:1,t.push(this.buildItem("prev",r))),i=0;i<n.numeric.length;i++)t.push(this.buildItem("page",n.numeric[i]));return this.options.next&&(u=n.currentPage<this.options.totalPages?n.currentPage+1:this.options.loop?1:this.options.totalPages,t.push(this.buildItem("next",u))),this.options.last&&t.push(this.buildItem("last",this.options.totalPages)),t},buildItem:function(t,i){var r=n("<li><\/li>"),u=n("<a><\/a>"),f=this.options[t]?this.makeText(this.options[t],i):i;return r.addClass(this.options[t+"Class"]),r.data("page",i),r.data("page-type",t),r.append(u.attr("href",this.makeHref(i)).addClass(this.options.anchorClass).html(f)),r},getPages:function(n){var f=[],e=Math.floor(this.options.visiblePages/2),t=n-e+1-this.options.visiblePages%2,i=n+e,r=this.options.visiblePages,u;for(r>this.options.totalPages&&(r=this.options.totalPages),t<=0&&(t=1,i=r),i>this.options.totalPages&&(t=this.options.totalPages-r+1,i=this.options.totalPages),u=t;u<=i;)f.push(u),u++;return{currentPage:n,numeric:f}},render:function(t){var i=this,r;this.$listContainer.children().remove();r=this.buildListItems(t);n.each(r,function(n,t){i.$listContainer.append(t)});this.$listContainer.children().each(function(){var r=n(this);switch(r.data("page-type")){case"page":r.data("page")===t.currentPage&&r.addClass(i.options.activeClass);break;case"first":r.toggleClass(i.options.disabledClass,1===t.currentPage);break;case"last":r.toggleClass(i.options.disabledClass,t.currentPage===i.options.totalPages);break;case"prev":r.toggleClass(i.options.disabledClass,!i.options.loop&&1===t.currentPage);break;case"next":r.toggleClass(i.options.disabledClass,!i.options.loop&&t.currentPage===i.options.totalPages)}})},setupEvents:function(){var t=this;this.$listContainer.off("click").on("click","li",function(i){var r=n(this);if(r.hasClass(t.options.disabledClass)||r.hasClass(t.options.activeClass))return!1;t.options.href||i.preventDefault();t.show(parseInt(r.data("page")))})},changeTotalPages:function(n,t){return this.options.totalPages=n,this.show(t)},makeHref:function(n){return this.options.href?this.generateQueryString(n):"#"},makeText:function(n,t){return n.replace(this.options.pageVariable,t).replace(this.options.totalPagesVariable,this.options.totalPages)},getPageFromQueryString:function(n){var i=this.getSearchString(n),t=new RegExp(this.options.pageVariable+"(=([^&#]*)|&|#|$)").exec(i);return t&&t[2]?(t=decodeURIComponent(t[2]),t=parseInt(t),isNaN(t)?null:t):null},generateQueryString:function(n,t){var i=this.getSearchString(t),r=new RegExp(this.options.pageVariable+"=*[^&#]*");return i?"?"+i.replace(r,this.options.pageVariable+"="+n):""},getSearchString:function(n){var i=n||t.location.search;return""===i?null:(0===i.indexOf("?")&&(i=i.substr(1)),i)},getCurrentPage:function(){return this.currentPage},getTotalPages:function(){return this.options.totalPages}};n.fn.twbsPagination=function(t){var u,e=Array.prototype.slice.call(arguments,1),f=n(this),r=f.data("twbs-pagination"),o="object"==typeof t?t:{};return r||f.data("twbs-pagination",r=new i(this,o)),"string"==typeof t&&(u=r[t].apply(r,e)),void 0===u?f:u};n.fn.twbsPagination.defaults={totalPages:1,startPage:1,visiblePages:5,initiateStartPageClick:!0,hideOnlyOnePage:!1,href:!1,pageVariable:"{{page}}",totalPagesVariable:"{{total_pages}}",page:null,first:"First",prev:"Previous",next:"Next",last:"Last",loop:!1,beforePageClick:null,onPageClick:null,paginationClass:"pagination",nextClass:"page-item next",prevClass:"page-item prev",lastClass:"page-item last",firstClass:"page-item first",pageClass:"page-item",activeClass:"active",disabledClass:"disabled",anchorClass:"page-link"};n.fn.twbsPagination.Constructor=i;n.fn.twbsPagination.noConflict=function(){return n.fn.twbsPagination=r,this};n.fn.twbsPagination.version="1.4.2"}(window.jQuery,window,document);